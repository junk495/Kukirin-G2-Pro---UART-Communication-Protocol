Kukirin G2 Pro - UART Communication ProtocolThis repository documents the reverse-engineered UART communication protocol between the display (master) and the motor controller (slave) of the Kukirin G2 Pro e-scooter. All information was gathered by analyzing the data stream and validated through various tests.This documentation is intended for educational purposes and for developers interested in understanding or customizing the scooter's behavior.1. Physical InterfaceBasic ParametersProtocol: UART (asynchronous)Baud Rate: 9600 bpsData Format: 8N1 (8 data bits, no parity, 1 stop bit)Voltage: 3.3V TTL2. Communication Structure2.1 Timing CharacteristicsCycle Interval: ~60msRefresh Rate: ~16-17 Hz2.2 Sequence PatternThe communication follows a consistent burst pattern:[TX Burst: 3 Packets] → [Pause: 2-5ms] → [RX Burst: 3 Packets] → [Idle: ~45ms]3. Packet Format3.1 TX Packets (Display → Controller) - FULLY DECODEDPacket Length: 20 BytesOffsetLengthNameExample ValuesDescription0x001Start Marker0x01Fixed identifier for TX packets.0x011Packet Length0x14Always 20 bytes.0x022Command Type0x0102Static command header.0x041Driving Mode0x05/0x0A/0x0FSelects the power level (1/2/3).0x051Function Bitmask0x80 (Base)Controls features via bits: +0x40(Brake), +0x20(Light), +0x10(Horn), +0x08(Turn L), +0x04(Turn R).0x066Static ParametersconstantUnchanged configuration values.0x0C2Speed Profile0x0C19/0x0C64Selects the V-Max limit (Standard/Unlocked). Little-Endian.0x0E2Static Parameter0x01A4Unchanged configuration value.0x102Throttle Setpoint0x0000-0x03E8Throttle lever position (Little-Endian). Max value is scaled by the driving mode.0x122ChecksumvariesCRC-16/MODBUS over the first 18 bytes (Little-Endian). See Section 4.1.3.2 RX Packets (Controller → Display) - FULLY DECODEDPacket Length: 16 BytesOffsetLengthNameExample ValueDescription0x001Start Marker0x02Response identifier.0x011Packet Length0x0E14 bytes of payload.0x021Status Type0x01Response type.0x031Status Flag0x00 / 0x800x80 is sent once at startup as "Boot-Acknowledged". Otherwise 0x00.0x041System Status0xC0 / 0xE0Reports brake status. 0xC0 (Normal). 0xE0 when brake is active (bit 5 is set).0x053Unknown0x000000Constant at 0x000000 so far.0x082Speed0x0DAC (Idle)The actual speed value. 2-byte Big-Endian, inversely proportional to the wheel rotation speed.0x0A2Unknown0x0000Unknown.0x0C1Brake/Regen Status0x6C/0x4CValue changes from 0x6C to 0x4C when the brake is active.0x0D1ChecksumvariesCRC-8 Checksum of the first 13 bytes (0x00-0x0C). See Section 4.2.0x0E2Echo/Verification0x020ERepeats the packet header (Start-Marker & Packet Length).4. Checksum Calculations4.1 Checksum (TX)The 2-byte checksum is calculated over the first 18 bytes of the packet (offset 0x00 to 0x11) and appended in Little-Endian format.Algorithm: CRC-16/MODBUS
Polynomial: 0x8005
Initial Value: 0xFFFF
Input Reflected: Yes
Output Reflected: Yes
XOR Out: 0x0000
4.2 Checksum (RX)The 1-byte checksum is calculated over the first 13 bytes of the packet (offset 0x00 to 0x0C) and placed at byte 14 (offset 0x0D).Algorithm: CRC-8
Polynomial: 0x31 (x⁸ + x⁵ + x⁴ + 1)
Initial Value: 0x00
Input Reflected: No
Output Reflected: No
XOR Out: 0x00
5. Start and Stop Sequence5.1 Startup Sequence (Handshake)The startup process is a classic handshake procedure to ensure the controller is ready before the display becomes fully active.Button Press: The user presses the power button. The display powers up and immediately starts sending standard TX packets. The display backlight remains off.Controller Response: The motor controller receives the TX packets, initializes itself, and starts sending RX packets.Handshake Signal: As a confirmation of a successful boot, the controller sends at least one special "Boot-Acknowledged" packet. This packet is identified by the Status-Flag at offset 0x03 having a value of 0x80.Display Activation: The display waits for a valid RX packet with this Status-Flag. Upon receipt, the handshake is complete, and the display turns on its backlight and user interface.Normal Operation: Immediately after the handshake, the controller switches to normal operation, sending RX packets with a Status-Flag of 0x00.5.2 Shutdown Sequence (Timeout)The shutdown process is not triggered by a specific command but by a communication loss.Long Button Press: The user holds the power button for several seconds.Communication Cut-off: The display firmware detects the long press and abruptly stops all UART communication.Controller Timeout: The motor controller no longer receives data from the display. After an internal timeout (e.g., 200-500 ms), the controller assumes the display is off and enters a low-power standby mode.6. Reference Table: Driving ModesProfile (TX 0x0C)Driving Mode (TX 0x04)Max Throttle (TX 0x10)Min. Speed Value (RX 0x08)V-Max (approx.)Limited (0x0C19)Level 1 (0x05)0x0168 (360)~0x00A9 (169)15 km/hLimited (0x0C19)Level 2 (0x0A)0x02A8 (680)~0x0080 (128)20 km/hLimited (0x0C19)Level 3 (0x0F)0x03E8 (1000)~0x0067 (103)25 km/hUnlocked (0x0C64)Level 1 (0x05)0x0168 (360)~0x0086 (134)19 km/hUnlocked (0x0C64)Level 2 (0x0A)0x02A8 (680)~0x0043 (67)38 km/hUnlocked (0x0C64)Level 3 (0x0F)0x03E8 (1000)~0x0030 (48)53 km/h
